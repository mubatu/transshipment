\documentclass[12pt,a4paper]{report}

\usepackage[margin=2.5cm]{geometry}
\usepackage{amsmath, amssymb}
\usepackage{graphicx}
\usepackage{setspace}
\usepackage{hyperref}

% ---------- Custom Answer Environment ----------
\newenvironment{answer}
  {\par\bigskip\noindent\textbf{Answer:}\par\medskip}
  {\par\bigskip}

\begin{document}

% ================== COVER PAGE ==================
\begin{titlepage}
    \centering
    \vspace*{2cm}
    {\Large Bo\u{g}azi\c{c}i University\\[0.3cm]
    Department of Industrial Engineering\par}

    \vspace{2cm}

    {\Huge \textbf{IE 310 - Operations Research}\\[0.3cm]
    \Large Fall 2025\par}

    \vfill

    {\LARGE \textbf{Course Project Report}\par}

    \vspace{2cm}

    \begin{large}
    \begin{tabular}{rl}
        ID: & 2021400231 \\
        Name: & Mustafa Batuhan BÃ¼ber \\
    \end{tabular}
    \end{large}

    \vfill

    \vspace{1.5cm}
    {\large Date: December 11, 2025\par}

    \vspace*{1cm}
\end{titlepage}

\tableofcontents
\thispagestyle{empty}
\clearpage
\setcounter{page}{1}

% ================== QUESTION 1 ==================
\section*{Modeling}
\addcontentsline{toc}{section}{Modeling}

\subsection*{1. Sets and Indices}
\begin{itemize}
    \item $S$: Set of Supply nodes (Layer 1), indexed by $i$.
    \item $T^1$: Set of First Transshipment nodes (Layer 2), indexed by $j$.
    \item $T^2$: Set of Second Transshipment nodes (Layer 3), indexed by $k$.
    \item $D$: Set of Demand nodes (Layer 4), indexed by $l$.
\end{itemize}

\subsection*{2. Parameters}
\begin{itemize}
    \item $S_i$: Supply capacity available at node $i \in S$.
    \item $D_l$: Demand quantity required at node $l \in D$.
    \item $c_{ij}$: Unit shipping cost from node $i \in S$ to node $j \in T^1$.
    \item $c_{jk}$: Unit shipping cost from node $j \in T^1$ to node $k \in T^2$.
    \item $c_{kl}$: Unit shipping cost from node $k \in T^2$ to node $l \in D$.
\end{itemize}

\subsection*{3. Decision Variables}
Let the continuous decision variables representing the flow quantities be:
\begin{itemize}
    \item $x_{ij} \ge 0$: Amount shipped from $i \in S$ to $j \in T^1$.
    \item $y_{jk} \ge 0$: Amount shipped from $j \in T^1$ to $k \in T^2$.
    \item $z_{kl} \ge 0$: Amount shipped from $k \in T^2$ to $l \in D$.
\end{itemize}

\subsection*{4. Objective Function}
Minimize the total transportation cost across all layers:
\begin{equation*}
    \text{Minimize } Z = \sum_{i \in S}\sum_{j \in T^1} c_{ij}x_{ij} + \sum_{j \in T^1}\sum_{k \in T^2} c_{jk}y_{jk} + \sum_{k \in T^2}\sum_{l \in D} c_{kl}z_{kl}
\end{equation*}

\subsection*{5. Constraints}
\begin{align}
    \text{Supply Capacity:} \quad & \sum_{j \in T^1} x_{ij} \le S_i & \forall i \in S \\
    \text{Flow Conservation (Layer 2):} \quad & \sum_{i \in S} x_{ij} = \sum_{k \in T^2} y_{jk} & \forall j \in T^1 \\
    \text{Flow Conservation (Layer 3):} \quad & \sum_{j \in T^1} y_{jk} = \sum_{l \in D} z_{kl} & \forall k \in T^2 \\
    \text{Demand Satisfaction:} \quad & \sum_{k \in T^2} z_{kl} \ge D_l & \forall l \in D \\
    \text{Non-Negativity:} \quad & x_{ij}, y_{jk}, z_{kl} \ge 0 & \forall i,j,k,l
\end{align}

\clearpage


% ================== QUESTION 2 ==================
\section*{Implementation}
\addcontentsline{toc}{section}{Implementation}

The optimization model formulated in the modeling part was implemented using the Python \texttt{pulp} library. The resulting network flow, showing only the active paths (basic variables) and their respective flow quantities, is visualized below in Figure \ref{fig:network_sol}.

\begin{figure}[h!]
    \centering
    \includegraphics[width=1\textwidth]{networkd.png}
    \caption{Visual representation of the network.}
    \label{fig:network_sol}
\end{figure}

\clearpage


% ================== QUESTION 3 ==================
\section*{Economic Interpretation and Sensitivity Analysis}
\addcontentsline{toc}{section}{Economic Interpretation and Sensitivity Analysis}

\subsection*{a) What if we increase the capacity of $S_3$ increases by one unit?}
In the solution obtained in the implementation part, the flows from the supply
nodes are:
\[
\sum_{j \in T^1} x_{0j} = 191,\quad
\sum_{j \in T^1} x_{1j} = 233,\quad
\sum_{j \in T^1} x_{2j} = 276,\quad
\sum_{j \in T^1} x_{3j} = 380.
\]
The corresponding supply capacities are:
\[
S_0 = 191,\quad S_1 = 233,\quad S_2 = 276,\quad S_3 = 385.
\]
So, capacity constraints of $S_0$, $S_1$ and $S_2$ are tight,
while $S_3$ has $5$ units of unused capacity:
\[
\sum_{j \in T^1} x_{3j} = 380 < S_3 = 385.
\]

Since the actual flow is strictly less than the available capacity ($380 < 385$), the supply constraint for Node 3 is \textbf{non-binding} (it has a slack of 5 units). In linear programming, the shadow price (dual value) of a non-binding constraint is zero. Therefore, increasing the capacity of Supply Node 3 by one unit provides additional surplus to a resource that is already in excess. It will not change the optimal routing or the objective function value.

\textbf{Expected Change:}
\[
\Delta Z = 0.
\]

\subsection*{b) What if we increase the capacity of $S_0$ by one unit?}

The supply constraint for $S_0$ is \textbf{binding} (Flow $x_{0,2} = 191$ equals Capacity $S_0 = 191$):
\[
\sum_{j \in T^1} x_{0j} = 191 = S_0 = 191.
\]

This suggests that increasing its capacity could reduce the total cost. To estimate the change, the cost of the path used by $S_0$ against the cost of the current marginal source can be compared.

In part (a) it is observed that $S_3$ has unused capacity (slack). Therefore, allowing one additional unit of flow from $S_0$ leads to reducing the flow from $S_3$ by one unit to maintain the balance of demand.

\textbf{Path Analysis:}
\begin{itemize}
    \item \textbf{Path from $S_3$ (Current Marginal Source):}
    The active path is $S_3 \to T^1_1 \to T^2_3$. The cost is $c_{3,1} + c_{1,3} = 17 + 33 = 50$.
    \item \textbf{Path from $S_0$ (Proposed Source):}
    The active path is $S_0 \to T^1_2 \to T^2_3$. The cost is $c_{0,2} + c_{2,3} = 11 + 30 = 41$.
\end{itemize}

\textbf{Expected Change:}
By shifting 1 unit of flow from the expensive path ($S_3$) to the cheaper path ($S_0$), the total cost is expected to change by:
\[
\Delta Z = \text{Cost}_{S0} - \text{Cost}_{S3} = 41 - 50 = -9.
\]
The total cost is expected to decrease by \textbf{9} units.


\subsection*{c) What if the demand quantity of $D_0$ increases by one unit?}

In the optimal solution, all demand is satisfied exactly by the flow from node $T^2_3$:
\[
z_{3,0} = 102,\quad
z_{3,1} = 289,\quad
z_{3,2} = 127,\quad
z_{3,3} = 210,\quad
z_{3,4} = 352.
\]
The demand quantities are:
\[
D_0 = 102,\; D_1 = 289,\; D_2 = 127,\; D_3 = 210,\; D_4 = 352.
\]
Thus, each demand constraint is \textbf{binding}, in particular for $D_0$:
\[
\sum_{k \in T^2} z_{k0} = z_{3,0} = 102 = D_0.
\]

If we increase the demand of node $D_0$ by one unit (from $102$ to $103$), the model must supply one additional unit of flow to $D_0$. Since there is unused capacity at supply node $S_3$, it is natural to use this slack to satisfy the extra demand.

We trace the path from the marginal source ($S_3$) to the specific destination ($D_0$) through the active network path established in the optimal solution.

\textbf{Path Analysis:}
The path is $S_3 \to T^1_1 \to T^2_3 \to D_0$. The total marginal cost is the sum of the unit costs along this path:
\begin{itemize}
    \item $S_3 \to T^1_1$: $c_{3,1} = 17$
    \item $T^1_1 \to T^2_3$: $c_{1,3} = 33$
    \item $T^2_3 \to D_0$: $c_{3,0} = 11$
\end{itemize}

The per-unit cost of this path is
\[
c_{3,1} + c_{1,3} + c_{3,0}
= 17 + 33 + 11
= 61.
\]

Because no other constraints can be relaxed without incurring extra cost, the cheapest way to provide one more unit to $D_0$ is precisely to send one extra unit along this path from $S_3$. Therefore, the marginal (shadow) cost of increasing $D_0$ by one unit equals this per-unit cost.

\textbf{Expected Change:}
\[
\Delta Z = +61.
\]

The total cost is expected to increase by \textbf{61} units. Consequently, the shadow price for the demand constraint of $D_0$ is expected to be 61.



\subsection*{3(c)}
The demand quantity of demand node 0 increases by one unit.  
What is the expected change in the total cost?

% Answer for Question 3(c).

\subsection*{3(d)}
The unit cost of shipping from supply node 0 to first-layer transshipment node 2 decreases by one.  
Do you expect a change in the basis? What is the expected change in the total cost?

% Answer for Question 3(d).

\subsection*{3(e)}
The unit cost of shipping from supply node 0 to first-layer transshipment node 0 decreases by one.  
Do you expect a change in the basis? What is the expected change in the total cost?

% Answer for Question 3(e).

\subsection*{3(f)}
Suppose instead that the cost decrease in part 3(e) is 27.  
Do you expect a change in the basis now? What is the resulting change in the total cost?

% Answer for Question 3(f).

\subsection*{3(g)}
Assume that supply node 0 is no longer allowed to ship to first-layer transshipment node 2.  
Do you expect the total cost to increase or decrease? Explain.

% Answer for Question 3(g).

\subsection*{3(h)}
Assume that the demand quantity of demand node 1 increases.  
What is the maximum amount by which this demand can increase while the system can still satisfy all demands?

% Answer for Question 3(h).

\clearpage


% ================== QUESTION 4 ==================
\section*{Integrality}
\addcontentsline{toc}{section}{Integrality}

% Answer for Question 4.

\end{document}