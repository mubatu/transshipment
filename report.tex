\documentclass[12pt,a4paper]{report}

\usepackage[margin=2.5cm]{geometry}
\usepackage{amsmath, amssymb}
\usepackage{graphicx}
\usepackage{setspace}
\usepackage{hyperref}

% ---------- Custom Answer Environment ----------
\newenvironment{answer}
  {\par\bigskip\noindent\textbf{Answer:}\par\medskip}
  {\par\bigskip}

\begin{document}

% ================== COVER PAGE ==================
\begin{titlepage}
    \centering
    \vspace*{2cm}
    {\Large Bo\u{g}azi\c{c}i University\\[0.3cm]
    Department of Industrial Engineering\par}

    \vspace{2cm}

    {\Huge \textbf{IE 310 - Operations Research}\\[0.3cm]
    \Large Fall 2025\par}

    \vfill

    {\LARGE \textbf{Course Project Report}\par}

    \vspace{2cm}

    \begin{large}
    \begin{tabular}{rl}
        ID: & 2021400231 \\
        Name: & Mustafa Batuhan BÃ¼ber \\
    \end{tabular}
    \end{large}

    \vfill

    \vspace{1.5cm}
    {\large Date: December 11, 2025\par}

    \vspace*{1cm}
\end{titlepage}

\tableofcontents
\thispagestyle{empty}
\clearpage
\setcounter{page}{1}

% ================== QUESTION 1 ==================
\section*{1. Modeling}
\addcontentsline{toc}{section}{1. Modeling}

\subsection*{1. Sets and Indices}
\begin{itemize}
    \item $S$: Set of Supply nodes (Layer 1), indexed by $i$.
    \item $T^1$: Set of First Transshipment nodes (Layer 2), indexed by $j$.
    \item $T^2$: Set of Second Transshipment nodes (Layer 3), indexed by $k$.
    \item $D$: Set of Demand nodes (Layer 4), indexed by $l$.
\end{itemize}

\subsection*{2. Parameters}
\begin{itemize}
    \item $S_i$: Supply capacity available at node $i \in S$.
    \item $D_l$: Demand quantity required at node $l \in D$.
    \item $c_{ij}$: Unit shipping cost from node $i \in S$ to node $j \in T^1$.
    \item $c_{jk}$: Unit shipping cost from node $j \in T^1$ to node $k \in T^2$.
    \item $c_{kl}$: Unit shipping cost from node $k \in T^2$ to node $l \in D$.
\end{itemize}

\subsection*{3. Decision Variables}
Let the continuous decision variables representing the flow quantities be:
\begin{itemize}
    \item $x_{ij} \ge 0$: Amount shipped from $i \in S$ to $j \in T^1$.
    \item $y_{jk} \ge 0$: Amount shipped from $j \in T^1$ to $k \in T^2$.
    \item $z_{kl} \ge 0$: Amount shipped from $k \in T^2$ to $l \in D$.
\end{itemize}

\subsection*{4. Objective Function}
Minimize the total transportation cost across all layers:
\begin{equation*}
    \text{Minimize } Z = \sum_{i \in S}\sum_{j \in T^1} c_{ij}x_{ij} + \sum_{j \in T^1}\sum_{k \in T^2} c_{jk}y_{jk} + \sum_{k \in T^2}\sum_{l \in D} c_{kl}z_{kl}
\end{equation*}

\subsection*{5. Constraints}
\begin{align}
    \text{Supply Capacity:} \quad & \sum_{j \in T^1} x_{ij} \le S_i & \forall i \in S \\
    \text{Flow Conservation (Layer 2):} \quad & \sum_{i \in S} x_{ij} = \sum_{k \in T^2} y_{jk} & \forall j \in T^1 \\
    \text{Flow Conservation (Layer 3):} \quad & \sum_{j \in T^1} y_{jk} = \sum_{l \in D} z_{kl} & \forall k \in T^2 \\
    \text{Demand Satisfaction:} \quad & \sum_{k \in T^2} z_{kl} \ge D_l & \forall l \in D \\
    \text{Non-Negativity:} \quad & x_{ij}, y_{jk}, z_{kl} \ge 0 & \forall i,j,k,l
\end{align}

\clearpage


% ================== QUESTION 2 ==================
\section*{2. Implementation}
\addcontentsline{toc}{section}{2. Implementation}

The optimization model formulated in the modeling part was implemented using the Python \texttt{pulp} library. The resulting network flow, showing only the active paths (basic variables) and their respective flow quantities, is visualized below in Figure \ref{fig:network_sol}.

\begin{figure}[h!]
    \centering
    \includegraphics[width=1\textwidth]{networkd.png}
    \caption{Visual representation of the network.}
    \label{fig:network_sol}
\end{figure}

\clearpage


% ================== QUESTION 3 ==================
\section*{3. Economic Interpretation and Sensitivity Analysis}
\addcontentsline{toc}{section}{3. Economic Interpretation and Sensitivity Analysis}

\subsection*{a) What if the capacity of $S_3$ increases by one unit?}
In the solution obtained in the implementation part, the flows from the supply
nodes are:
\[
\sum_{j \in T^1} x_{0j} = 191,\quad
\sum_{j \in T^1} x_{1j} = 233,\quad
\sum_{j \in T^1} x_{2j} = 276,\quad
\sum_{j \in T^1} x_{3j} = 380.
\]
The corresponding supply capacities are:
\[
S_0 = 191,\quad S_1 = 233,\quad S_2 = 276,\quad S_3 = 385.
\]
So, capacity constraints of $S_0$, $S_1$ and $S_2$ are tight,
while $S_3$ has $5$ units of unused capacity:
\[
\sum_{j \in T^1} x_{3j} = 380 < S_3 = 385.
\]

Since the actual flow is strictly less than the available capacity ($380 < 385$), the supply constraint for Node 3 is \textbf{non-binding} (it has a slack of 5 units). In linear programming, the shadow price (dual value) of a non-binding constraint is zero. Therefore, increasing the capacity of Supply Node 3 by one unit provides additional surplus to a resource that is already in excess. It will not change the optimal routing or the objective function value.

\textbf{Expected Change:}
\[
\Delta Z = 0.
\]

\subsection*{b) What if the capacity of $S_0$ increases by one unit?}

The supply constraint for $S_0$ is \textbf{binding} (Flow $x_{0,2} = 191$ equals Capacity $S_0 = 191$):
\[
\sum_{j \in T^1} x_{0j} = 191 = S_0 = 191.
\]

This suggests that increasing its capacity could reduce the total cost. To estimate the change, the cost of the path used by $S_0$ against the cost of the current marginal source can be compared.

In part (a) it is observed that $S_3$ has unused capacity (slack). Therefore, allowing one additional unit of flow from $S_0$ leads to reducing the flow from $S_3$ by one unit to maintain the balance of demand.

\textbf{Path Analysis:}
\begin{itemize}
    \item \textbf{Path from $S_3$ (Current Marginal Source):}
    The active path is $S_3 \to T^1_1 \to T^2_3$. The cost is $c_{3,1} + c_{1,3} = 17 + 33 = 50$.
    \item \textbf{Path from $S_0$ (Proposed Source):}
    The active path is $S_0 \to T^1_2 \to T^2_3$. The cost is $c_{0,2} + c_{2,3} = 11 + 30 = 41$.
\end{itemize}

\textbf{Expected Change:}
By shifting 1 unit of flow from the expensive path ($S_3$) to the cheaper path ($S_0$), the total cost is expected to change by:
\[
\Delta Z = \text{Cost}_{S0} - \text{Cost}_{S3} = 41 - 50 = -9.
\]
The total cost is expected to decrease by \textbf{9} units.


\subsection*{c) What if the demand quantity of $D_0$ increases by one unit?}

In the optimal solution, all demand is satisfied exactly by the flow from node $T^2_3$:
\[
z_{3,0} = 102,\quad
z_{3,1} = 289,\quad
z_{3,2} = 127,\quad
z_{3,3} = 210,\quad
z_{3,4} = 352.
\]
The demand quantities are:
\[
D_0 = 102,\; D_1 = 289,\; D_2 = 127,\; D_3 = 210,\; D_4 = 352.
\]
Thus, each demand constraint is \textbf{binding}, in particular for $D_0$:
\[
\sum_{k \in T^2} z_{k0} = z_{3,0} = 102 = D_0.
\]

If we increase the demand of node $D_0$ by one unit (from $102$ to $103$), the model must supply one additional unit of flow to $D_0$. Since there is unused capacity at $S_3$, it is natural to use this slack to satisfy the extra demand.

\textbf{Path Analysis:}
The path is $S_3 \to T^1_1 \to T^2_3 \to D_0$. The total marginal cost is the sum of the unit costs along this path:
\begin{itemize}
    \item $S_3 \to T^1_1$: $c_{3,1} = 17$
    \item $T^1_1 \to T^2_3$: $c_{1,3} = 33$
    \item $T^2_3 \to D_0$: $c_{3,0} = 11$
\end{itemize}

The per-unit cost of this path is
\[
c_{3,1} + c_{1,3} + c_{3,0}
= 17 + 33 + 11
= 61.
\]

Because no other constraints can be relaxed without incurring extra cost, the cheapest way to provide one more unit to $D_0$ is precisely to send one extra unit along this path from $S_3$. Therefore, the marginal (shadow) cost of increasing $D_0$ by one unit equals this per-unit cost.

\textbf{Expected Change:}
\[
\Delta Z = +61.
\]

The total cost is expected to increase by \textbf{61} units. Consequently, the shadow price for the demand constraint of $D_0$ is expected to be 61.



\subsection*{d) What if the cost of shipping from $S_0$ to $T^1_2$ decreases by one unit?}

In the optimal solution from the implementation part, the flow from $S_0$ to $T^1_2$ is corresponding to the variable $x_{0,2}$. It is \textbf{basic} and strictly positive:
\[
x_{0,2} = 191.
\]
Its unit cost in the original model is:
\[
c_{0,2} = 11.
\]

Decreasing the cost of a basic variable makes the current active path strictly more favorable than it was before. Since the supply constraint at $S_0$ is already binding (all supply is shipped  through this link), the flow cannot increased further. Since the link was already optimal at a higher price, it remains optimal at a lower price. Therefore, \textbf{no change expected in the basis}.

\textbf{Expected Change:}
The total cost will decrease by the reduction amount multiplied by the volume of flow on that link:
\[
\Delta Z = (\text{New Cost} - \text{Old Cost}) \times x_{0,2} = (-1) \times 191 = -191.
\]
The total cost is expected to decrease by \textbf{191} units.


\subsection*{e) What if the cost of shipping from $S_0$ to $T^1_0$ decreases by one unit?}

In the optimal solution from the implementation part, the flow from $S_0$ to $T^1_0$ is corresponding to the variable ($x_{0,0}$). It is \textbf{non-basic}:
\[
x_{0,0} = 0.
\]

To determine if this variable will enter the basis, its \textbf{reduced cost} should be checked. The reduced cost represents the amount by which the unit cost $c_{0,0}$ must decrease to make this path competitive with the current optimal path.

\textbf{Cost Comparison:}
\begin{itemize}
    \item Current active link ($S_0 \to T^1_2$): Unit cost = 11.
    \item Proposed link ($S_0 \to T^1_0$): Unit cost = 28.
\end{itemize}

The cost difference in the first layer alone is substantial ($28 - 11 = 17$). A decrease of just 1 unit (reducing $c_{0,0}$ to 27) is insufficient to bridge this gap. The reduced cost of $x_{0,0}$ is undoubtedly greater than 1.

\textbf{Expected Change:}
Since the cost reduction is not large enough to make the variable enter the basis, the optimal solution ($x^*$) remains exactly the same. The variable $x_{0,0}$ continues to have 0 flow.
\[
\Delta Z = (\text{New Cost} - \text{Old Cost}) \times x_{0,0} = (-1) \times 0 = 0.
\]
There is \textbf{no expected change} in the basis or the total cost.



\subsection*{f) What if the same cost of shipping from $S_0$ to $T^1_0$ decreases by 27 units instead of one?}

In the previous part, the cost difference between the active path and the unused path was approximately 17 units. A decrease of 1 unit was insufficient to make the new path attractive. However, a decrease of \textbf{27} units brings the cost of $c_{0,0}$ down from 28 to \textbf{1}.

\textbf{Cost Comparison:}
\begin{itemize}
    \item Current active link ($S_0 \to T^1_2$): Unit cost = 11.
    \item Proposed link ($S_0 \to T^1_0$): Unit cost = 28 - 27 = 1.
\end{itemize}

This decrease is significantly larger than the reduced cost barrier observed previously. It makes the path via $T^1_0$ far cheaper than the current optimal path via $T^1_2$.

\textbf{Expected Change:}
Because the cost reduction exceeds the reduced cost of the variable, the new reduced cost of $x_{0,0}$ becomes negative. This signals that the solution can be improved by using this link.
Therefore, \textbf{a change in the basis is expected}. Variable $x_{0,0}$ will enter the basis (become positive), and likely replace $x_{0,2}$ as the primary route for $S_0$. The total cost will also decrease significantly.


\subsection*{g) What if $S_0$ is no longer allowed to ship to $T^1_2$?}

In the optimal solution, the only active outgoing arc from $S_0$ is:
\[
x_{0,2} = 191.
\]
All supply at $S_0$ is shipped through
$S_0 \to T^1_2$. The supply constraint for $S_0$ is binding:
\[
\sum_{j \in T^1} x_{0j} = x_{0,2} = 191 = S_0.
\]
Forbidding this shipment effectively imposes a new constraint:
\[
x_{0,2} = 0.
\]

This removes the currently optimal option from the feasible set. When the optimal choice is removed, the system must resort to a second-best alternative to route the 191 units of supply. By definition, the second-best alternative cannot be cheaper than the optimal one.

\textbf{Expected Change:}
It is expected that the total cost \textbf{increases}. The model will be forced to use more expensive links (likely diverting flow through $T^1_0$ or $T^1_1$ or shifting supply responsibilities to other nodes) to satisfy the demand.


\subsection*{h) What is the maximum amount by which the demand at $D_1$ can increase?}

To determine the maximum possible increase in demand, the total available supply in the system should be compared against the total required demand:

\begin{itemize}
    \item \textbf{Total Supply Capacity:}
    \[ \sum S_i = 191 + 233 + 276 + 385 = 1085. \]
    \item \textbf{Total Current Demand:}
    \[ \sum D_l = 102 + 289 + 127 + 210 + 352 = 1080. \]
\end{itemize}

The system currently has a \textbf{surplus capacity} (slack) of:
\[
\text{Slack} = \text{Total Supply} - \text{Total Demand} = 1085 - 1080 = 5 \text{ units}.
\]

From the optimal solution, it is known that this
slack is entirely located at $S_3$:
\[
\sum_{j \in T^1} x_{3j} = 380 < S_3 = 385.
\]

If the demand at node $D_1$ increases by some amount $\Delta$, the total
demand becomes:
\[
\sum_{l \in D} D_l^{\text{new}}
= 1080 + \Delta.
\]

For the system to still be able to satisfy \emph{all} demands, this must hold:
\[
1080 + \Delta \le 1085
\quad \Longrightarrow \quad
\Delta \le 5.
\]

There are no capacity constraints on the arcs themselves (only on the supply
nodes). Therefore, as long as the extra demand does not exceed the remaining $5$ units of supply
at $S_3$, the model can reroute additional flow from $S_3$ through the network
to $D_1$ and still satisfy all demands. Once $\Delta > 5$, the total demand
would exceed the total available supply, making the problem infeasible.

\textbf{Maximum feasible increase:}
\[
\Delta_{\max} = 5.
\]


\clearpage



% ================== QUESTION 4 ==================
\section*{4. Integrality}
\addcontentsline{toc}{section}{4. Integrality}

In the implemented model, all decision variables are defined as
\emph{continuous} and non-negative. However, in the optimal solution, all flow values turn out to be \textbf{integers}. This is not a coincidence, but a well-known property of \emph{network flow}
models such as transportation and transshipment problems. The main reasons
are:

\begin{itemize}
    \item The constraints of the model are all of the form:
    \begin{itemize}
        \item supply constraints (sum of flows $\leq$ integer),
        \item flow conservation constraints (sum of inflows $=$ sum of outflows),
        \item demand constraints (sum of inflows $\geq$ integer),
    \end{itemize}
    and they correspond to a network structure.
    \item The right-hand sides (supplies and demands) are all \textbf{integers}.
    \item The constraint matrix of a pure network flow problem is
    \textbf{totally unimodular}. This implies that every basic feasible solution
    of the linear program is integer whenever the right-hand sides are integer.
\end{itemize}

Because of total unimodularity and integer supplies/demands, the extreme points of the feasible region automatically have integer
components. The simplex method returns one of these extreme points as the
optimal solution. Therefore, even though we allow the decision variables to
take any continuous values, the structure of the problem forces the
optimal solution to be integral.

\end{document}